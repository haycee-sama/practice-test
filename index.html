<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Orange Group CBT Practice</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
background:linear-gradient(135deg,#ff6600,#ff8c00);
min-height:100vh;
font-family:Segoe UI;
}
.card{
border-radius:15px;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
}
.btn-primary{
background:#ff6600;
border:none;
}
.btn-primary:hover{
background:#e65c00;
}
.timer{
font-weight:bold;
font-size:18px;
}
.correct{color:green;}
.wrong{color:red;}
#examSection{display:none;}
#resultSection{display:none;}
</style>
</head>

<body>

<div class="container mt-5">

<!-- INSTRUCTION SECTION -->
<div id="instructionSection" class="card p-4">
<h3 class="text-center mb-3">Orange Group CBT Practice Examination</h3>

<p><b>Instructions:</b></p>
<ul>
<li>Total Questions: 25</li>
<li>15 Quantitative (Math)</li>
<li>5 Comprehension</li>
<li>5 Logical Reasoning</li>
<li>Duration: 30 Minutes</li>
<li>Do not refresh during the test</li>
</ul>

<div class="mb-3">
<label class="form-label">Candidate Full Name</label>
<input type="text" id="candidateName" class="form-control" placeholder="Enter your full name">
</div>

<button class="btn btn-primary w-100" onclick="startExam()">Start Examination</button>
</div>

<!-- EXAM SECTION -->
<div id="examSection">

<div class="card p-3 mb-3">
<div class="d-flex justify-content-between">
<div>Candidate: <b id="displayName"></b></div>
<div>Time Left: <span id="timer" class="text-danger timer"></span></div>
</div>
</div>

<div class="card p-4">
<h6 id="questionCategory"></h6>
<p id="questionText"></p>
<div id="optionsArea"></div>

<div class="mt-3 d-flex justify-content-between">
<button class="btn btn-secondary" onclick="prevQuestion()">Previous</button>
<button class="btn btn-primary" onclick="nextQuestion()">Next</button>
<button class="btn btn-success" onclick="submitExam()">Submit</button>
</div>
</div>

</div>

<!-- RESULT SECTION -->
<div id="resultSection" class="card p-4 mt-4"></div>

</div>

<script>
const { jsPDF } = window.jspdf;

let allMath = [];
let allReasoning = [];
let allComprehension = [];

function generateMathBank(){
for(let i=1;i<=40;i++){
let a = Math.floor(Math.random()*20)+5;
let b = Math.floor(Math.random()*10)+1;
allMath.push({
section:"Quantitative",
question:`If a product costs ₦${a*100} and markup is ${b*10}%, what is selling price?`,
options:[
`₦${a*100}`,
`₦${a*100*(1+b/10)}`,
`₦${a*100*(1+b/5)}`,
`₦${a*100*(1+b/20)}`
],
answer:1,
explanation:"Selling Price = Cost × (1 + Markup%)"
});
}
}

function generateReasoningBank(){
for(let i=1;i<=20;i++){
allReasoning.push({
section:"Logical Reasoning",
question:"All managers are leaders. Some leaders are innovators. Which must be true?",
options:[
"All managers are innovators",
"Some managers may be innovators",
"No manager is innovator",
"All innovators are managers"
],
answer:1,
explanation:"Since some leaders are innovators and all managers are leaders, some managers may be innovators."
});
}
}

function generateComprehensionBank(){
for(let i=1;i<=10;i++){
allComprehension.push({
section:"Comprehension",
question:`PASSAGE: Orange Group focuses on quality manufacturing and efficiency.
Question: What drives Orange Group success?`,
options:[
"Low pricing only",
"Quality and efficiency",
"No marketing",
"Outsourcing everything"
],
answer:1,
explanation:"Passage states quality manufacturing and efficiency."
});
}
}

generateMathBank();
generateReasoningBank();
generateComprehensionBank();

let selectedQuestions = [];
let current = 0;
let answers = [];
let time = 1800;
let timerInterval;

function startExam(){
let name = document.getElementById("candidateName").value.trim();
if(!name){ alert("Enter your name"); return; }

document.getElementById("displayName").innerText=name;

selectedQuestions = [
...shuffle(allMath).slice(0,15),
...shuffle(allComprehension).slice(0,5),
...shuffle(allReasoning).slice(0,5)
];

selectedQuestions = shuffle(selectedQuestions);

answers = new Array(25).fill(null);

document.getElementById("instructionSection").style.display="none";
document.getElementById("examSection").style.display="block";

renderQuestion();
startTimer();
}

function shuffle(array){
return array.sort(()=>Math.random()-0.5);
}

function renderQuestion(){
let q = selectedQuestions[current];
document.getElementById("questionCategory").innerText=`Section: ${q.section}`;
document.getElementById("questionText").innerText=q.question;

let optionsHTML="";
q.options.forEach((opt,index)=>{
optionsHTML+=`
<div class="form-check">
<input class="form-check-input" type="radio" name="option"
${answers[current]===index?"checked":""}
onclick="answers[${current}]=${index}">
<label class="form-check-label">${opt}</label>
</div>
`;
});
document.getElementById("optionsArea").innerHTML=optionsHTML;
}

function nextQuestion(){
if(current<24){ current++; renderQuestion(); }
}

function prevQuestion(){
if(current>0){ current--; renderQuestion(); }
}

function startTimer(){
updateTimer();
timerInterval=setInterval(()=>{
time--;
updateTimer();
if(time<=0){
clearInterval(timerInterval);
submitExam();
}
},1000);
}

function updateTimer(){
let m=Math.floor(time/60);
let s=time%60;
document.getElementById("timer").innerText=`${m}:${s<10?"0"+s:s}`;
}

function submitExam(){
clearInterval(timerInterval);

let score=0;
let resultHTML="<h4>Examination Result</h4>";

selectedQuestions.forEach((q,i)=>{
if(answers[i]===q.answer){score++;}
});

resultHTML+=`<p><b>Total Score:</b> ${score}/25</p><hr>`;

selectedQuestions.forEach((q,i)=>{
if(answers[i]!==q.answer){
resultHTML+=`
<div class="mb-2">
<b>Q${i+1} Failed</b><br>
Correct Answer: ${q.options[q.answer]}<br>
Explanation: ${q.explanation}
</div>
<hr>
`;
}
});

resultHTML+=`<button class="btn btn-primary" onclick="exportPDF(${score})">Export PDF</button>`;

document.getElementById("examSection").style.display="none";
document.getElementById("resultSection").style.display="block";
document.getElementById("resultSection").innerHTML=resultHTML;
}

function exportPDF(score){
let doc = new jsPDF();
doc.text("Orange Group CBT Result",20,20);
doc.text("Candidate: "+document.getElementById("displayName").innerText,20,30);
doc.text("Score: "+score+"/25",20,40);
doc.save("Orange_Group_CBT_Result.pdf");
}

</script>

</body>
</html>
