<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional CBT Practice</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background:#f4f6f9; }
.question-card { min-height:300px; }
.timer { font-weight:bold; font-size:18px; }
.correct { color:green; }
.wrong { color:red; }
.passage-box { background:#fff; padding:15px; border-radius:8px; border:1px solid #ddd; margin-bottom:15px; }
</style>
</head>
<body>

<div class="container mt-4">

<div id="instructionScreen">

<h3 class="text-center mb-3">CBT Practice Examination</h3>

<div class="card p-4">

<h5>Instructions:</h5>
<ul>
<li>Total Questions: 25</li>
<li>15 Quantitative</li>
<li>5 Reasoning</li>
<li>5 Comprehension</li>
<li>Total Time: 30 Minutes</li>
<li>All questions carry equal marks</li>
<li>Do not refresh or close browser</li>
</ul>

<div class="mt-3">
<label class="form-label">Enter Your Full Name</label>
<input type="text" id="candidateName" class="form-control">
</div>

<button class="btn btn-primary mt-3" onclick="startExam()">Start Exam</button>

</div>
</div>

<div id="examScreen" style="display:none;">

<div class="d-flex justify-content-between mb-3">
<div>Candidate: <b id="displayName"></b></div>
<div>Time Left: <span id="timer" class="text-danger timer"></span></div>
</div>

<div id="questionContainer"></div>

<div class="mt-3 d-flex justify-content-between">
<button class="btn btn-secondary" onclick="prevQuestion()">Previous</button>
<button class="btn btn-primary" onclick="nextQuestion()">Next</button>
<button class="btn btn-success" onclick="submitExam()">Submit</button>
</div>

</div>

<div id="resultScreen" style="display:none;" class="mt-4"></div>

</div>

<script>

// QUESTION BANK

const quantitative = [
{q:"Break-even: Selling 240, variable 150, fixed 180000. Units?",o:["1000","1500","2000","2500"],a:2},
{q:"Revenue 10M, target 20% margin. Expenses 7.5M. Max extra expense?",o:["300k","400k","500k","600k"],a:2},
{q:"If 40% of 500 is increased by 20%, result?",o:["200","240","220","260"],a:1},
{q:"Overtime after 40hrs at 1.5x. Worked 50hrs at $20/hr. Gross pay?",o:["1100","1200","1300","1400"],a:2},
{q:"Simple interest on 5000 at 10% for 3 years?",o:["1000","1500","1200","1300"],a:1},
{q:"15% of 8000?",o:["1000","1100","1200","1300"],a:2},
{q:"If cost = 100 + 5q, q=50. Cost?",o:["300","350","400","450"],a:1},
{q:"Ratio 2:3 total 100. Larger share?",o:["40","50","60","70"],a:2},
{q:"Increase 200 by 25%",o:["240","250","260","270"],a:1},
{q:"300 reduced by 20%",o:["220","230","240","250"],a:2},
{q:"Compound 1000 at 10% 1 year?",o:["1100","1200","1000","1150"],a:0},
{q:"Profit if SP 150 CP 120?",o:["20","25","30","35"],a:2},
{q:"If 5 workers complete job in 10 days. 10 workers need?",o:["4","5","6","7"],a:1},
{q:"20% of 250?",o:["40","45","50","55"],a:2},
{q:"If revenue 500k, expense 400k, margin?",o:["15%","20%","25%","30%"],a:1},
{q:"Stock 10000, sold 4000. Remaining?",o:["5000","6000","7000","8000"],a:1}
];

const reasoning = [
{q:"Reducing training weakens because?",o:["Costs high","Errors increase","Competitors reduce","Margins low"],a:1},
{q:"Raising price increases revenue if?",o:["Demand elastic","Demand stable","Costs rise","Competitors exit"],a:1},
{q:"AI improved profit therefore AI always works. Flaw?",o:["Generalization","Assumption","Bias","None"],a:0},
{q:"Similar rockets imply copying. Weakens?",o:["Design screened","Only one design feasible","Workers move","Color scheme"],a:1},
{q:"Private ownership caused profit rise. Weakness?",o:["Single example","Recent data","Partial ownership","Timing"],a:0},
{q:"Higher interest offsets default. Weakens?",o:["Defaults rise","Costs low","Rates stable","Unemployment"],a:0}
];

const comprehensionPassage = `
Research shows productivity increases when employees are given autonomy. 
However, too much autonomy without structure reduces accountability. 
Effective leadership balances independence with measurable expectations.
`;

const comprehension = [
{q:"Productivity increases when employees are given?",o:["Micromanagement","Autonomy","No rules","No oversight"],a:1},
{q:"Too much autonomy leads to?",o:["Higher morale","Lower accountability","Better profit","More control"],a:1},
{q:"Effective leadership requires?",o:["Strict rules","Balance","No structure","Full freedom"],a:1},
{q:"Main idea?",o:["Autonomy alone","Structure alone","Balance needed","Micromanagement best"],a:2},
{q:"Accountability relates to?",o:["Responsibility","Freedom","Creativity","Isolation"],a:0},
{q:"Passage tone?",o:["Critical","Balanced","Aggressive","Humorous"],a:1}
];

// RANDOM SELECTION

function pickRandom(arr, num){
return arr.sort(()=>0.5-Math.random()).slice(0,num);
}

let examQuestions=[];
let current=0;
let answers=[];
let time=1800;
let timerInterval;

function startExam(){

let name=document.getElementById("candidateName").value.trim();
if(name===""){ alert("Enter your name"); return;}

document.getElementById("displayName").innerText=name;

examQuestions=[
...pickRandom(quantitative,15),
...pickRandom(reasoning,5),
...pickRandom(comprehension,5)
];

examQuestions=examQuestions.sort(()=>0.5-Math.random());

answers=new Array(examQuestions.length).fill(null);

document.getElementById("instructionScreen").style.display="none";
document.getElementById("examScreen").style.display="block";

renderQuestion();
startTimer();
}

function renderQuestion(){
let q=examQuestions[current];
let html="";

if(comprehension.includes(q)){
html+=`<div class="passage-box"><b>Passage:</b><br>${comprehensionPassage}</div>`;
}

html+=`<div class="card p-3 question-card">
<h5>Question ${current+1} of ${examQuestions.length}</h5>
<p>${q.q}</p>`;

q.o.forEach((opt,i)=>{
html+=`
<div class="form-check">
<input class="form-check-input" type="radio" name="option"
${answers[current]===i?"checked":""}
onclick="answers[${current}]=${i}">
<label class="form-check-label">${opt}</label>
</div>`;
});

html+="</div>";

document.getElementById("questionContainer").innerHTML=html;
}

function nextQuestion(){ if(current<examQuestions.length-1){current++;renderQuestion();}}
function prevQuestion(){ if(current>0){current--;renderQuestion();}}

function startTimer(){
updateTimer();
timerInterval=setInterval(()=>{
time--;
updateTimer();
if(time<=0){clearInterval(timerInterval);submitExam();}
},1000);
}

function updateTimer(){
let m=Math.floor(time/60);
let s=time%60;
document.getElementById("timer").innerText=`${m}:${s<10?"0"+s:s}`;
}

function submitExam(){

clearInterval(timerInterval);

let score=0;
examQuestions.forEach((q,i)=>{ if(answers[i]===q.a)score++; });

let resultHTML=`<h3>Exam Result</h3>
<p>Candidate: ${document.getElementById("displayName").innerText}</p>
<p>Score: ${score}/25</p>
<button class="btn btn-dark" onclick="exportResult(${score})">Export Result</button>`;

document.getElementById("examScreen").style.display="none";
document.getElementById("resultScreen").style.display="block";
document.getElementById("resultScreen").innerHTML=resultHTML;
}

function exportResult(score){

let content=`CBT RESULT\nCandidate: ${document.getElementById("displayName").innerText}\nScore: ${score}/25\n\n`;

examQuestions.forEach((q,i)=>{
content+=`Q${i+1}: ${q.q}\n`;
content+=`Correct Answer: ${q.o[q.a]}\n\n`;
});

let blob=new Blob([content],{type:"text/plain"});
let url=URL.createObjectURL(blob);
let a=document.createElement("a");
a.href=url;
a.download="CBT_Result.txt";
a.click();
}

</script>

</body>
</html>
